"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.StratumServerClient = void 0;
const assert_1 = require("../../assert");
class StratumServerClient {
    constructor(options) {
        this.publicAddress = null;
        this.graffiti = null;
        this.id = options.id;
        this.socket = options.socket;
        this.connected = true;
        this.subscribed = false;
        this.messageBuffer = '';
        assert_1.Assert.isNotUndefined(this.socket.remoteAddress);
        this.remoteAddress = this.socket.remoteAddress;
    }
    static accept(socket, id) {
        return new StratumServerClient({ socket, id });
    }
    close(error) {
        if (!this.connected) {
            return;
        }
        this.messageBuffer = '';
        this.connected = false;
        this.socket.destroy(error);
    }
}
exports.StratumServerClient = StratumServerClient;
//# sourceMappingURL=stratumServerClient.js.map